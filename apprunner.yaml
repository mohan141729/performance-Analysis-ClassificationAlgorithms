version: 1.0
resources:
  - name: perf-classifier
    type: "AWS::AppRunner::Service"
    properties:
      sourceConfiguration:
        imageRepository:
          imageIdentifier: "<aws_account_id>.dkr.ecr.<your-region>.amazonaws.com/performance-analysis-repo:latest"
          imageConfiguration:
            port: "8000"
        autoDeploymentsEnabled: true
        authenticationConfiguration:
          connectionArn: arn:aws:apprunner:<your-region>:<aws_account_id>:connection/<your-connection-name>
      instanceConfiguration:
        cpu: 1024
        memory: 2048
        scalingConfiguration:
          minSize: 1
          maxSize: 3
      healthCheckConfiguration:
        protocol: HTTP
        path: /
        timeoutSeconds: 5
        intervalSeconds: 10
        healthyThreshold: 1
        unhealthyThreshold: 5
      serviceRole: arn:aws:iam::<aws_account_id>:role/AppRunnerServiceRole

